
### Overview

**RMF Features**

RFM features are used in customer segmentation and stand for:

Recency:

How recently a customer made a purchase or interacted with the business. Example: Days since the last purchase. Frequency:

How often a customer makes purchases within a given time period. Example: Number of purchases in the past year. Monetary:

How much money a customer spends during their interactions. Example: Total revenue generated by the customer.

### How it the feature has been extracted in my code
### Recency

Step behind extracting recency

- Use invoice date
- Choose the latest date in the invoice date and then subtract all other date with the maximum purchase date
- That is the recent date

```python
# Changing the datetime format of invoice date into datetime and then extracting only the date part we can only extract date part

filtered_retail_data['new_date'] = filtered_retail_data['InvoiceDate'].dt.date

# Getting the maximum date from a column

maximum_date_from_new_date = filtered_retail_data['new_date'].max()

#Finding the most recent purchase date for each customer

customer_data = filtered_retail_data.groupby('CustomerID')['new_date'].max().reset_index()

#changing the date type to date time

customer_data['new_date'] = pd.to_datetime(customer_data['new_date'])

maximum_date_from_new_date = pd.to_datetime(maximum_date_from_new_date)

#Getting the difference between two values

customer_data['Last_purchases_date'] = (maximum_date_from_new_date - customer_data['new_date']).dt.days

```

Frequency
Here we will simply count how many times the particular customer purchased from the store. For that, we can count the unique number of the transaction made. For that, we can count the customer and we will get the value.

```python 
temp_df1 = filtered_retail_data.groupby('CustomerID')['InvoiceNo'].nunique().reset_index()

#Let's try to rename InvoiceNo column in tempdf1 into total_purchased

temp_df1.rename(columns= {'InvoiceNo':'Total_Transactions'}, inplace = True)

#Meging the temp_df with the customer data on customerID

customer_data = pd.merge(customer_data,temp_df1,on = 'CustomerID',how = 'inner')
```

Monetary Value
Here we will be using simply unit-price and quantity to calculate the monetary value

```python
# Calculating the total spend

filtered_retail_data['total_spend'] = filtered_retail_data['UnitPrice'] * filtered_retail_data['Quantity']

# Finding the total_spend amount by each of the customers

total_spend = filtered_retail_data.groupby('CustomerID')['total_spend'].sum().reset_index()

# Merging the data with the customer_data

customer_data = pd.merge(customer_data,total_spend,on = 'CustomerID',how = 'left')


```


Leads to :

[[Dataset after RFM]]
[[Feature Engineering after behavioral analysis]]